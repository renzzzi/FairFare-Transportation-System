<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fair Fare - Travel Supervisor Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link rel="stylesheet" href="/css/pages/admin/adminTemp.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
        <div class="d-flex align-items-center">
            <button class="btn btn-link text-dark mr-3" id="toggleSidebar">
                <i class="fas fa-bars fa-lg"></i>
            </button>
            <div class="navbar-brand d-flex align-items-center mb-0">
                <img src="/images/logos/logo-color.png" width="40" class="mr-2" alt="Fair Fare Logo" />
                <h1>FAIR FARE</h1>
            </div>
        </div>
        <div class="ml-auto">
            <ul class="navbar-nav">
                <li class="nav-item dropdown d-none d-lg-block"> <a class="nav-link dropdown-toggle" href="#"
                        id="accountDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                        <i class="fas fa-user-circle"></i> Account
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="accountDropdown">
                        <a class="dropdown-item" href="#"><i class="fas fa-cog"></i> Settings</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <div class="sidebar sidebar-menu-container" id="sidebar">
        <a href="#" id="dashboardButton"><i class="fas fa-tachometer-alt"></i> <span class="label">Dashboard</span></a>

        <a href="#" id="supervisorButton"><i class="fas fa-book"></i> <span class="label">Travel Supervisors
                Management</span></a>
        <a href="#" id="passengerButton"><i class="fas fa-chart-bar"></i> <span class="label">Passenger Accounts
                Management</span></a>
        <a href="#" id="busButton"><i class="fas fa-road"></i> <span class="label">Bus and Route Management</span></a>
        <a href="#" id="reportButton"><i class="fas fa-chart-bar"></i> <span class="label">Reports </span></a>
        <a href="#" id="customerserviceButton"><i class="fas fa-bus-alt"></i> <span class="label">Customer
                Service</span></a>
        <hr class="d-block d-lg-none">
        <a href="#" id="mobileAccountLink" class="d-block d-lg-none"><i class="fas fa-user-circle"></i> <span
                class="label">Account</span></a>
        <a href="#" id="mobileLogoutLink" class="d-block d-lg-none"><i class="fas fa-sign-out-alt"></i> <span
                class="label">Logout</span></a>
    </div>

    <main class="main-content" id="mainContent">
        <!-- DASHBOARD -->
        <section id="dashboard" class="dashboard">
            <h2 class="d-flex">Dashboard Overview</h2>
            <div class="row">
                <div class="col-md-3">
                    <div class="card bg-primary text-white">
                        <div class="card-body">
                            <h5 class="card-title">Total Buses</h5>
                            <p class="card-text" id="totalBusesDashboard">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-success text-white">
                        <div class="card-body">
                            <h5 class="card-title">Active Supervisors</h5>
                            <p class="card-text" id="activeSupervisorsDashboard">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-warning text-white">
                        <div class="card-body">
                            <h5 class="card-title">Pending Supervisor Approvals</h5>
                            <p class="card-text" id="pendingSupervisorApprovalsDashboard">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-info text-white">
                        <div class="card-body">
                            <h5 class="card-title">Active Routes</h5>
                            <p class="card-text" id="activeRoutesDashboard">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-md-3">
                    <div class="card bg-secondary text-white">
                        <div class="card-body">
                            <h5 class="card-title">Total Passenger Users</h5>
                            <p class="card-text" id="totalPassengersDashboard">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark text-white">
                        <div class="card-body">
                            <h5 class="card-title">Revenue</h5>
                            <p class="card-text" id="revenueTodayDashboard">â‚±0.00</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-danger text-white">
                        <div class="card-body">
                            <h5 class="card-title">Customer Service (Pending)</h5>
                            <p class="card-text" id="pendingCSRDashboard">0</p>
                        </div>
                    </div>
                </div>
            </div>
            <section class="row d-flex">
                <section class="chart col-md-6" data-chart="seatsbooked">
                    <span class="chart-header">
                        <h3>Seats Booked</h3>
                        <select id="seatsbooked-timerange">
                            <option value="1y">1 year</option>
                            <option value="9m">9 months</option>
                            <option value="6m">6 months</option>
                            <option value="3m">3 months</option>
                        </select>
                    </span>
                    <canvas id="seatsbooked-chart"></canvas>
                </section>

                <section class="chart col-md-6" data-chart="websitevisitors">
                    <span class="chart-header">
                        <h3>Website Visitors</h3>
                        <select id="websitevisitors-timerange">
                            <option value="1y">1 year</option>
                            <option value="9m">9 months</option>
                            <option value="6m">6 months</option>
                            <option value="3m">3 months</option>
                        </select>
                    </span>
                    <canvas id="websitevisitors-chart"></canvas>
                </section>
            </section>
            <section class="row d-flex">
                <section class="col-md-6 chart" data-chart="ratings">
                    <h3>Ratings</h3>
                    <canvas id="ratings-chart"></canvas>
                </section>
                <section class="col-md-6 chart" data-chart="customerService">
                    <h3>Breakdown of Customer Service Requests</h3>
                    <canvas id="customerServiceChart"></canvas>
                </section>
            </section>
        </section>

        <!-- TRAVEL SUPERVISOR ACCOUNTS MANAGEMENT -->
        <section id="supervisor" class="dashboard" style="display: none;">
            <h2>Manage Travel Supervisor Accounts</h2>
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title text-dark">Travel Supervisor Accounts</h5>
                            <div class="table-responsive">
                                <table class="table table-striped" id="supervisorAccountsTable">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Account Status</th>
                                            <th>Application Date</th>
                                            <th>Approval Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="6" class="text-center">No supervisor accounts found.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- PASSENGER ACCOUNTS MANAGEMENT -->
        <section id="passenger" class="dashboard" style="display: none;">
            <h2>Manage Passenger Accounts</h2>
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title text-dark">Passenger Accounts</h5>
                            <div class="table-responsive">
                                <!-- Make sure your HTML table has this structure -->
                                <table id="passengerAccountsTable" class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Account Status</th>
                                            <th>Registration Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- BUS AND ROUTE -->
        <section id="bus" class="dashboard" style="display: none;">
            <h2>Manage Buses</h2>
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title text-dark">Add New Bus</h5>
                            <form id="addBusForm" class="mb-4">
                                <div class="form-row">
                                    <div class="form-group col-md-4">
                                        <label for="busName">Bus Name</label>
                                        <input type="text" class="form-control" id="busName"
                                            placeholder="e.g., Super Cruiser" required>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="busType">Bus Type</label>
                                        <input type="text" class="form-control" id="busType"
                                            placeholder="e.g., AC, Non-AC" required>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="busCapacity">Capacity</label>
                                        <input type="number" class="form-control" id="busCapacity"
                                            placeholder="e.g., 40, 50" required>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label>&nbsp;</label> <button type="submit" class="btn btn-primary mt-2">Save
                                            Bus</button>
                                    </div>
                                </div>
                            </form>

                            <h5 class="card-title text-dark">Bus List</h5>
                            <div class="table-responsive">
                                <table class="table table-striped" id="busListTable">
                                    <thead>
                                        <tr>
                                            <th>Bus ID</th>
                                            <th>Name</th>
                                            <th>Type</th>
                                            <th>Capacity</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="5" class="text-center">No buses found.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h2>Manage Routes</h2>
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title text-dark">Add New Route</h5>
                            <form id="addRouteForm" class="mb-4">
                                <div class="form-row">
                                    <div class="form-group col-md-3">
                                        <label for="routeFrom">From</label>
                                        <input type="text" class="form-control" id="routeFrom" required>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="routeTo">To</label>
                                        <input type="text" class="form-control" id="routeTo" required>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="routeDistance">Distance (KM)</label>
                                        <input type="number" class="form-control" id="routeDistance" required>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>&nbsp;</label>
                                        <button type="submit" class="btn btn-primary mt-2">Save Route</button>
                                    </div>
                                </div>
                            </form>
                            <h5 class="card-title text-dark">Route List</h5>
                            <div class="table-responsive">
                                <table class="table table-striped" id="routeListTable">
                                    <thead>
                                        <tr>
                                            <th>Route ID</th>
                                            <th>From</th>
                                            <th>To</th>
                                            <th>Distance</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="5" class="text-center">No routes found.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- REPORTS -->
        <section id="report" class="dashboard" style="display: none;">
            <h2>Reports</h2>
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Sales Revenue Chart</h5>
                            <div class="form-group">
                                <label for="seatsbooked-timerange">Time Range:</label>
                                <select id="seatsbooked-timerange" class="form-control">
                                    <option value="1y">1 year</option>
                                    <option value="9m">9 months</option>
                                    <option value="6m">6 months</option>
                                    <option value="3m">3 months</option>
                                </select>
                            </div>
                            <canvas id="salesRevenue-chart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <section class="chart" data-chart="customerService">
                            <h3>Customer Demographics Chart</h3>
                            <canvas id="customerDemographics-chart"></canvas>
                        </section>
                    </div>
                </div>
                <div class="row card-body">
                    <h5 class="card-title">Supervisor Reports</h5>
                    <table class="table table-striped" id="reports-table">
                        <thead>
                            <tr>
                                <th>Supervisor ID</th>
                                <th>Report Title</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
            </div>
        </section>

        <!-- CUSTOMER SERVICE -->
        <section id="customerservice" class="dashboard" style="display: none;">
            <h2>Passenger Requests / Complaints</h2>
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title text-dark">Requests/Complaints List</h5>
                            <div class="table-responsive">
                                <table class="table table-striped" id="requests-table">
                                    <thead>
                                        <tr>
                                            <th>User ID
                                                <button class="sort-button" onclick="sortTable(0)">&#x21D5;</button>
                                            </th>
                                            <th>Type</th>
                                            <th>Message</th>
                                            <th>Status</th>
                                            <th>Submitted On</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="6" class="text-center">No requests or complaints found.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SETTINGS -->

        <section id="settings" class="dashboard" style="display: none;">
            <h2>Settings</h2>
            <button id="theme-toggle">Toggle Theme</button>
        </section>

        <section id="settings" class="dashboard" style="display: none;">
            <h2>Settings</h2>
            <button id="theme-toggle">Toggle Theme</button>
        </section>
    </main>

    <script type="module" src="../js/admin-js/admin-script.js"></script>
    <script type="module" src="../js/admin-js/dashboard.js"></script>
    <script type="module" src="../js/admin-js/travelsupervisor.js"></script>
    <script type="module" src="../js/admin-js/passenger.js"></script>
    <script type="module" src="../js/admin-js/busAndRoute.js"></script>
    <script type="module" src="../js/admin-js/customerService.js"></script>
    <script type="module" src="../js/admin-js/report.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        $(document).ready(function () {
            var $toggleSidebarButton = $("#toggleSidebar");
            var $sidebar = $("#sidebar");
            var $mainContent = $("#mainContent");
            var $menuLinks = $(".sidebar a");

            var sections = {
                dashboardButton: "dashboard",
                supervisorButton: "supervisor",
                passengerButton: "passenger",
                busButton: "bus",
                reportButton: "report",
                customerserviceButton: "customerservice"
            };

            // Toggle sidebar
            $toggleSidebarButton.click(function () {
                $sidebar.toggleClass("active");
                $mainContent.toggleClass("active");
            });

            // Section navigation
            $menuLinks.click(function (e) {
                e.preventDefault();

                $.each(sections, function (_, sectionId) {
                    $("#" + sectionId).hide();
                });

                $("#" + sections[this.id]).show();

                if ($(window).width() <= 768) {
                    $sidebar.removeClass("active");
                    $mainContent.removeClass("active");
                }
            });

            // Show default section
            $("#dashboardSection").show();
        });
    </script>

    <!-- JQUERY FOR CHANGING PAGES -->
    <script>
        $(document).ready(function () {
            // Initial visibility setup
            $('#dashboardSection').show();
            $('#reportsSection, #manageSupervisorsSection, #managePassengersSection, #manageTripsSection, #customerServiceSection').hide();

            // Dashboard button click
            $('#dashboardButton').click(function () {
                $('#dashboardSection').show();
                $('#manageTripsSection, #manageBookingsSection, #reportsSection, #customerServiceSection, #manageSupervisorsSection, #managePassengersSection').hide();
                updateDashboardStats();
            });

            // Manage Travel Supervisors button click
            $('#manageSupervisorsButton').click(function () {
                $('#manageSupervisorsSection').show();
                $('#dashboardSection, #manageTripsSection, #manageBookingsSection, #reportsSection, #customerServiceSection, #managePassengersSection').hide();
                renderManageSupervisorsTable(); // Assuming you have this function
            });

            // Manage Passenger Accounts button click
            $(document).ready(function () {
                // Initial visibility setup
                $('#dashboard').show();
                $('#report, #supervisor, #passenger, #bus, #customerservice').hide();

                // Dashboard button click
                $('#dashboardButton').click(function () {
                    $('#dashboard').show();
                    $('#bus, #supervisor, #report, #customerservice, #passenger').hide();
                    updateDashboardStats();
                });

                // Supervisor button click
                $('#supervisorButton').click(function () {
                    $('#supervisor').show();
                    $('#dashboard, #bus, #report, #customerservice, #passenger').hide();
                    renderManageSupervisorsTable(); // Assuming you have this function
                });

                // Passenger button click
                $('#passengerButton').click(function () {
                    $('#passenger').show();
                    $('#dashboard, #bus, #report, #customerservice, #supervisor').hide();
                    renderManagePassengersTable(); // Assuming you have this function
                });

                // Bus button click
                $('#busButton').click(function () {
                    $('#bus').show();
                    $('#dashboard,  #report, #customerservice, #supervisor, #passenger').hide();
                    renderManageTripsTable();
                });

                // Report button click
                $('#reportButton').click(function () {
                    $('#report').show();
                    $('#dashboard, #bus, #customerservice, #supervisor, #passenger').hide();
                    renderReports(); // Assuming you have this function
                });

                // Customer Service button click
                $('#customerserviceButton').click(function () {
                    $('#customerservice').show();
                    $('#dashboard, #bus, #report, #supervisor, #passenger').hide();
                    // Add any specific function call for customer service if needed
                });
            });
        });
    </script>

    <script>
        $(".dropdown-item").click(function (event) {
            event.preventDefault();
            window.location.href = "../login.html";
        });
    </script>

</body>

</html>